<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Spotynif â€” Credits</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <link rel="icon" href="favicon.svg" />
  <meta name="description" content="Credits for Spotynif - Enhanced Spotify Status Cards">
</head>
<body>
  <main class="mainwrap">
    <header class="mainheader">
      <div class="headerlogo">
        <div class="logodot"></div>
        <h1>credits</h1>
      </div>
      <p class="headersubtitle">people behind spotynif project</p>
    </header>
    
    <section class="creditspage">
      <div class="creditsgrid" id="creditsgrid">
        <div class="loadingstate">loading credits information...</div>
      </div>
      
      <div class="backhome">
        <a href="/home" class="modernbtn btnprimary">
          <i class="fas fa-arrow-left"></i>
          back home
        </a>
      </div>
    </section>
  </main>
  
  <script>
    async function loadcredits() {
      const userids = ['1170109139989561464', '1106121476932898946'];
      const creditsgrid = document.getElementById('creditsgrid');
      
      try {
        const promises = userids.map(id => 
          fetch(`https://api.lanyard.rest/v1/users/${id}`)
            .then(r => r.json())
            .then(d => d.success ? d.data : null)
        );
        
        const results = await Promise.all(promises);
        creditsgrid.innerHTML = '';
        
        results.forEach((data, index) => {
          const creditcard = document.createElement('div');
          creditcard.className = 'creditcard';
          
          if (data) {
            const user = data.discord_user;
            const spotify = data.spotify;
            
            creditcard.innerHTML = `
              <div class="creditheader">
                <img class="creditavatar" src="https://cdn.discordapp.com/avatars/${user.id}/${user.avatar}.png" alt="${user.username}" onerror="this.src='https://cdn.discordapp.com/embed/avatars/0.png'">
                <div class="credituserinfo">
                  <h3>${user.global_name || user.username}</h3>
                  <div class="creditrole">${index === 0 ? 'lead developer' : 'contributor'}</div>
                  <div class="credituserid">${user.id}</div>
                </div>
              </div>
              <div class="creditstatus">
                <div class="statusindicator status${data.discord_status}"></div>
                <span class="statustext">${data.discord_status}</span>
              </div>
              <div class="creditspotify ${!spotify ? 'notlistening' : ''}">
                ${spotify ? `
                  <div class="spotifytrack">${spotify.song}</div>
                  <div class="spotifyartist">by ${spotify.artist}</div>
                ` : `
                  <div class="spotifytrack">not listening to spotify</div>
                `}
              </div>
            `;
          } else {
            creditcard.innerHTML = `
              <div class="errorstate">
                <div>failed to load user data</div>
                <div class="credituserid">${userids[index]}</div>
              </div>
            `;
          }
          
          creditsgrid.appendChild(creditcard);
        });
      } catch (error) {
        creditsgrid.innerHTML = '<div class="errorstate">failed to load credits information</div>';
      }
    }

    loadcredits();
    setInterval(loadcredits, 30000);
  </script>
</body>
</html>
